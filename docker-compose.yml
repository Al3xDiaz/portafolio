version: '3.4'

services:
 frontend:
    container_name: "frontend"
    image: "docker.pkg.github.com/al3xdiaz/portafolio/frontend:latest"
    build:
        context: .
        dockerfile: frontend/dockerfile
    ports: 
        - "80:80"
    depends_on: 
        - "backend"
 backend:
    container_name: "backend"
    image: "docker.pkg.github.com/al3xdiaz/portafolio/backend:latest"
    build: 
        context: .
        dockerfile: backend/dockerfile
    depends_on: 
        - "mongo-db"
 mongo-db:
    container_name: mongo-db
    image: mongo
    #restart: always
    volumes: 
        - ./mongo/data:/data/db
    environment:
        MONGO_INITDB_ROOT_USERNAME: ${MONGO_U}
        MONGO_INITDB_ROOT_PASSWORD: ${MONGO_P}
